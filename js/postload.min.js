import{collectionArr as e}from'/data/records.min.js';const t=document,n=t.getElementById('report'),s=t.getElementById('details_wrap');t.documentElement.classList.add('noDialogSupport');for(const t of e)t.records.sort(((e,t)=>{const n=e.Artist.toLowerCase(),s=t.Artist.toLowerCase();return n<s?-1:n>s?1:0}));{const n=n=>{let o=0;const r='check';function c(e){const n=t.createElement(e.element),s=e.attrs;for(const e in s)n.setAttribute(e,s[e]);return e.inner&&('string'==typeof e.inner?n.textContent=e.inner:'object'==typeof e.inner&&n.appendChild(e.inner)),n}function i(e){let n=t.createElement('table');const s=c({element:'caption',attrs:{class:'-visually-hidden'},inner:e.title});n.appendChild(s),n=function(e,t){for(const n of t){let t=e.insertRow();const s=c({element:'input',attrs:{type:'checkbox',name:r+o++}}),i=c({element:'td',attrs:{class:'checks'},inner:s});t.appendChild(i);let l='';for(const e in n){const s=c({element:'td',attrs:{class:e.toLowerCase()},inner:n[e]});t.appendChild(s),'Artist'===e&&(l=n[e]+': '),'Track'===e&&(l+=n[e])}const a=t.querySelector('input');a.value=l,a.setAttribute('aria-label',l),a.id=l.replace(/ /g,'-').replace(/:/g,'--')}return e}(n,e.records);return n=function(e,t){const n=e.createTHead().insertRow(),s=c({element:'span',attrs:{class:'-visually-hidden'},inner:'Select track'}),o=c({element:'th',attrs:{scope:'col',class:'checks'},inner:s});n.appendChild(o);for(const e of t){const t=c({element:'th',attrs:{scope:'col',class:e.toLowerCase()},inner:e});n.appendChild(t)}return e}(n,Object.keys(e.records[0])),n}const l=s.querySelectorAll('details');let a=0;for(const t of e){l[a++].section_title=t.title}s.addEventListener('click',(function(n){const s=n.target;if('summary'!==s.tagName.toLowerCase())return;const o=s.closest('details');if(!o||o.querySelector('.responsive_wrap'))return;const r=t.createElement('div');r.className='responsive_wrap';const c=function(e,t){for(const n of t)if(n.title.toLowerCase()===e.toLowerCase())return n;return null}(o.section_title,e);if(!c)return;const l=i(c);r.appendChild(l),r.details=o,o.appendChild(r)}))};n();const r=e=>{const n=t.getElementById('getUserName'),s=t.getElementById('sentRequest'),r=t.getElementById('name'),c=n.querySelector('button.btn-submit'),i=n.querySelector('button.btn-more');n.addEventListener('close',(e=>f(!1))),s.addEventListener('close',(e=>{f(!1)})),r.value=localStorage.getItem('name')||'';const l=e=>{r.checkValidity()?c.removeAttribute('hidden'):c.setAttribute('hidden','')};l(),r.addEventListener('input',l);const a=e=>t.querySelectorAll('input[type=checkbox]:checked'),d='-js-dialogBg',u=e=>{(e=>{if(t.querySelector('.'+d))return;const n=t.createElement('div');n.addEventListener('click',(t=>m(e))),n.classList.add(d),t.body.appendChild(n)})(e),e.removeAttribute('hidden'),f(!0);const n=e.querySelector('[tabindex]');n&&n.focus()},m=e=>{e.setAttribute('hidden','true'),(e=>{const n=t.querySelector('.'+d);n&&t.body.removeChild(n)})(),f(!1)},p=e=>{const s=a().length;if(s<2||s>9)return;(e=>{const n=t.querySelectorAll('.checkedList');for(const e of n){e.innerHTML='';const n=new DocumentFragment;for(const e of a()){const s=t.createElement('li');s.textContent=e.value,n.appendChild(s)}e.appendChild(n)}})();u(n),s>=5?i.setAttribute('hidden',''):i.removeAttribute('hidden')};function h(){const e=(e=>{t.querySelectorAll('.checkedList');const n={name:r.value,requests:[]};for(const e of a()){const[t,s]=e.value.split(':'),o={artist:t.trim(),track:s.trim()};n.requests.push(o)}return n})();fetch('https://websemantics.uk/records/requests/post-requests/',{method:'POST',body:JSON.stringify(e)}).then((e=>e.json())).then((e=>o('postRequestData() success: \r\n'+JSON.stringify(e)))).catch((e=>o(' \r\npostRequestData() error:'+e)))}const f=e=>{e?t.body.classList.add('-js-scrollLock'):t.body.classList.remove('-js-scrollLock')},y=e=>{const t=e.closest('.dialog');['.btn-close','.btn-more','.btn-finish'].some((t=>e.matches(t)))?m(t):e.matches('.btn-submit')&&(r.checkValidity()?(m(t),(e=>{const t=s;u(t);const n=t.querySelector('[tabindex]');n&&n.focus();let o=`${r.value}'s requests!\n`;t.querySelector('.message').textContent=o})()):r.focus())};t.body.addEventListener('click',(e=>{const t=e.target;'checkbox'!==t.type?t.matches('td')?(e=>{const t=e.parentElement.querySelector('input[type=checkbox]');t&&t.click()})(t):t.matches('button')&&y(t):(e=>{e.focus(),p()})(t)}));t.querySelector('form').addEventListener('submit',(e=>{e.preventDefault(),h(),(e=>{for(const e of a()){e.setAttribute('disabled',''),e.checked=!1;const t=e.closest('tr');t&&t.classList.add('-js-disabled')}})()}))};setTimeout((e=>{r()}),0)}const o=(e,t)=>{t&&(n.textContent=''),n.textContent+=e};